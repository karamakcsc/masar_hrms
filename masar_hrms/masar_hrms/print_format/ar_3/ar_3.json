{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-03-18 20:34:00.135757",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Salary Slip",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!DOCTYPE html>\r\n<html lang=\"ar\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Document</title>\r\n    <style>\r\n      .width-rows{width:25%;}\r\n      .head-split { display: flex; justify-content: space-between; align-items: center;width: 100%;}\r\n      .head-part {padding: 1px; width: 33.3%;}\r\n      .logo img {max-width: 50px; height: 30px;}\r\n      .center-text { text-align: center; }\r\n      .right-text{ text-align: right; font-size: 15px;}\r\n      .td-value {font-weight: bold; text-align: center; color: black; font-size: 13px;}\r\n      .editable-div {width:90%;height:22px; box-sizing: border-box; padding: 5px; font-size: 12px; text-align: center; color: black; border: 1px solid black ; }\r\n      .div-earnings-deductions {display: flex; justify-content: space-between; border: 2px solid black; width: 100%; margin: auto; padding: 2px; margin: 20px auto;}\r\n      .deductions{width: 49%;  border: 1px solid white;  height:min-content; }\r\n      .earnings {width: 49%; padding: 1px; border: 1px solid white; height: min-content; }\r\n      table {width: 100%;  border:none;}\r\n      .salary-head { text-align: center; border: 1px solid black; color: black;}\r\n      .money-j { text-align: center; font-size: 12px; color: black;   border-bottom:  1px solid black ; border-top: 1px solid black ;}\r\n      .money-f { text-align: center; border: 1px solid black; font-size: 12px; color: black;}\r\n      .data{text-align: right; border-right: 1px solid black;  font-size: 12px; color: black;   border:  1px solid black ;}\r\n      .spacer {height: 4px; display: block;}\r\n      .numbers { text-align: center; border-right: 1px solid black;  font-size: 12px; color: black;   border:  1px solid black ; padding-right: 10px;}\r\n      .div-company-owner{display: flex; justify-content: space-between; border: 2px solid white; width: 100%; margin: auto; padding: 2px; margin: 20px auto;}\r\n      .company{width: 49%;  border: 1px solid white;  height:min-content; text-align: right; }\r\n      .owner{width: 49%;  border: 1px solid white;  height:min-content; display: flex; align-items: center; }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n<div style=\"display: table; clear: both;\"></div>\r\n\r\n<div style=\" float:left ; width:70% ; padding :1px ;position: relative;top : -30px ; \"></div>\r\n    \r\n    <div class=\"head-split\">\r\n        <div class=\"head-part center-text\" style = \"padding-right: 100px;\"> \r\n           <strong>QP 177-F3</strong> \r\n        </div>\r\n        <div class=\"logo\">\r\n            <img src=\"https://kingabdullah.jo/sites/default/files/Coat_of_Arms_big.gif\" alt=\"Coat of Arms\">\r\n        </div>\r\n        <div class=\"head-part center-text\" style = \"padding-left: 60px;\">\r\n            <strong> <p>\u0648\u0632\u0627\u0631\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 <br>\u062f\u0627\u0626\u0631\u0629 \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u062f\u062e\u0644 \u0648 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a</p></strong>\r\n        </div>   \r\n    </div>\r\n    <br><br><!-- new two lines -->\r\n    <p class=\"center-text\">\r\n        \u0634\u0647\u0627\u062f\u0629 \u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0631\u0648\u0627\u062a\u0628 \u0648 \u0627\u0644\u0627\u062c\u0648\u0631 \u0648 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0645\u0642\u062a\u0637\u0639\u0629\r\n        <br>\u0635\u0627\u062f\u0631 \u0628\u0627\u0644\u0627\u0633\u0646\u0627\u062f \u0644\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0641\u0642\u0631\u0647 (\u0648) \u0645\u0646 \u0627\u0644\u0645\u0627\u062f\u0629 (12) \u0645\u0646 \u0642\u0627\u0646\u0648\u0646 \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u062f\u062e\u0644 \u0631\u0642\u0645 (34) \u0644\u0633\u0646\u0629 2014 \u0648 \u062a\u0639\u062f\u064a\u0644\u0627\u062a\u0647\r\n    </p>\r\n    <br>\r\n    <p class=\"center-text\">\r\n       <strong>\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641</strong>\r\n    </p>\r\n    <br> <!-- new line -->\r\n     {% set emp_data = frappe.get_doc('Employee', doc.employee) %} \r\n    <table style=\" width: 100%;\">\r\n<tr>\r\n    <td class=\"width-rows\">\r\n        <p class=\"td-value\">\u0627\u0644\u0639\u0627\u0626\u0644\u0629</p>\r\n        <div class=\"editable-div\" readonly>{{ emp_data.last_name_ar }}</div>\r\n    </td>\r\n    <td class=\"width-rows\">\r\n        <p class=\"td-value\">\u0627\u0644\u062c\u062f</p>\r\n        <div class=\"editable-div\" readonly>{{ emp_data.third_name_ar }}</div>\r\n    </td>\r\n    <td class=\"width-rows\">\r\n        <p class=\"td-value\">\u0627\u0644\u0623\u0628</p>\r\n        <div class=\"editable-div\" readonly>{{ emp_data.middle_name_ar }}</div>\r\n    </td>\r\n    <td class=\"width-rows\">\r\n        <p class=\"td-value\">\u0627\u0644\u0627\u0633\u0645</p>\r\n        <div class=\"editable-div\" readonly>{{ emp_data.first_name_ar }}</div>\r\n    </td>\r\n</tr>\r\n\r\n        <tr>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a</p>\r\n                <div class=\"editable-div\" readonly></div>\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0635 . \u0628</p>\r\n                <div class=\"editable-div\" readonly></div>\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a/\u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631</p>\r\n                <div class=\"editable-div\" readonly>{{ emp_data.national_no }}</div>\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a</p>\r\n                <div class=\"editable-div\" readonly></div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0647\u0627\u062a\u0641</p>\r\n                <div class=\"editable-div\" readonly>{{ emp_data.cell_number or \"\" }}</div>\r\n            </td>\r\n            <td colspan=\"3\">\r\n                <p class=\"td-value\">\u0627\u0644\u0639\u0646\u0648\u0627\u0646</p>\r\n                <div class=\"editable-div\" readonly style=\"width:96.8%;\">{{ emp_data.current_address or \"\"}}</div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u062a\u0627\u0631\u064a\u062e \u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0639\u0645\u0644(\u0627\u0646\u0647\u0627\u0621 \u0627\u0644\u062e\u062f\u0645\u0629)</p>\r\n                 <div class=\"editable-div\" readonly>\r\n                   {% set date = frappe.utils.getdate(doc.posting_date) %}\r\n                   {% set end_year = date.replace(month=12, day=31) %}\r\n                   {{ end_year }}\r\n                </div>\r\n\r\n\r\n\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u062a\u0627\u0631\u064a\u062e \u0645\u0628\u0627\u0634\u0631\u0629 \u0627\u0644\u0639\u0645\u0644 (\u0627\u0644\u062a\u0639\u064a\u064a\u0646)</p>\r\n                <div class=\"editable-div\" readonly>{{ emp_data.date_of_joining  }}</div>\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0645\u062f\u0629 \u0627\u0644\u0639\u0645\u0644 \u0627\u062b\u0646\u0627\u0621 \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629</p>\r\n                <div class=\"editable-div\" readonly>\r\n                {% set date = frappe.utils.getdate(doc.posting_date) %}\r\n                {% set end_year = date.replace(month=12, day=31) %}\r\n                {% set total_days = (end_year - date).days %}\r\n                {% if total_days > 365 %}\r\n                    {% set total_days = 365 %}\r\n                {% endif %}\r\n                {{ total_days }}\r\n\r\n                </div>\r\n            </td>\r\n            <td class=\"width-rows\">\r\n                <p class=\"td-value\">\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u064a\u0629</p>\r\n                <div class=\"editable-div\" readonly>\r\n                    {% set date = frappe.utils.getdate(doc.posting_date) %}\r\n                    {{ date.strftime('%Y') }}\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        \r\n    </table>\r\n    <div class=\"div-earnings-deductions\">\r\n        <div class=\"deductions\">\r\n            <table>\r\n                <tr>\r\n                    <th class=\"salary-head\" color=\"black\"><strong>\u0627\u0642\u062a\u0637\u0627\u0639\u0627\u062a \u0645\u0646 \u0627\u0644\u0631\u0648\u0627\u062a\u0628 \u0648 \u0627\u0644\u0623\u062c\u0648\u0631</strong></th>\r\n                    <th class=\"money-j\"><strong>\u062f\u064a\u0646\u0627\u0631</strong></th>\r\n                    <th class=\"money-f\"><strong>\u0641\u0644\u0633</strong></th>\r\n                </tr>\r\n                <tr class=\"spacer\"></tr>\r\n                <tr>\r\n                    {% set income_tax = frappe.db.sql(\"\"\"\r\n                    SELECT \r\n                    \ttsd.salary_component ,\r\n                        SUM(tsd.amount) AS total\r\n                    FROM  \r\n                        `tabSalary Detail` tsd\r\n                        INNER JOIN `tabSalary Slip` tss ON tsd.parent = tss.name\r\n                    WHERE \r\n                        tsd.salary_component ='Income Tax'\r\n                        AND tss.employee  = %s\r\n                        AND tss.docstatus = 1 \r\n                        AND YEAR(tss.posting_date) = %s \"\"\" , (doc.employee , date.strftime('%Y') ) , as_dict = True) %}\r\n                    \r\n                    <td class=\"data\">\r\n                     {% set comp_name = frappe.get_all(\"Salary Component\" , filters={\"name\" : income_tax[0]['salary_component'] } , fields=[\"name_ar\"])%}\r\n                        {{ comp_name[0].name_ar }}</td>\r\n                    <td colspan=\"2\" class=\"numbers\">{{ (income_tax[0]['total'])|round(3) }}</td>\r\n                    \r\n                </tr>\r\n                <tr>\r\n                    <td class=\"data\">\r\n                     {% set comp_ = frappe.get_all(\"Salary Component\" , filters={\"name\" :'Social Security' } , fields=[\"name_ar\"])%}\r\n                        {{ comp_[0].name_ar }}\r\n                    </td>\r\n                    <td colspan=\"2\" class=\"numbers\">\r\n                        {% set ss_amount = frappe.db.sql(\"\"\"SELECT \r\n                        tsd.salary_component, \r\n                        SUM(tsd.amount) AS social_security_amount\r\n                    FROM \r\n                        `tabSalary Detail` tsd\r\n                    INNER JOIN \r\n                        `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                    WHERE \r\n                        tss.employee = %s \r\n                        AND tsd.parentfield = 'deductions'\r\n                        AND tsd.salary_component ='Social Security'\r\n                        AND tss.docstatus = 1\r\n                        AND YEAR(tss.posting_date) = %s\r\n                    GROUP BY \r\n                        tsd.salary_component\r\n                    \"\"\",(doc.employee , date.strftime('%Y')) , as_dict = True) %}\r\n                        {{ (ss_amount[0][\"social_security_amount\"])|round(3) }}\r\n                    </td>\r\n                    \r\n                </tr>\r\n                {% set deductions = frappe.db.sql(\"\"\"SELECT \r\n                        tsd.salary_component, \r\n                        SUM(tsd.amount) AS total_ded_comp\r\n                    FROM \r\n                        `tabSalary Detail` tsd\r\n                    INNER JOIN \r\n                        `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                    WHERE \r\n                        tss.employee = %s \r\n                        AND tsd.parentfield = 'deductions'\r\n                        AND tsd.salary_component != 'Income Tax' AND  tsd.salary_component !='Social Security'\r\n                        AND tss.docstatus = 1\r\n                        AND YEAR(tss.posting_date) = %s\r\n                    GROUP BY \r\n                        tsd.salary_component\r\n                    \"\"\",(doc.employee , date.strftime('%Y')) , as_dict = True) %}\r\n                {% for deduction in deductions %} \r\n                <tr>\r\n                    <td class=\"data\">\r\n                        {% set comp_name = frappe.get_all(\"Salary Component\" , filters={\"name\" : deduction.salary_component } , fields=[\"name_ar\"])%}\r\n                        {{ comp_name[0].name_ar }}\r\n                    </td>\r\n                    <td colspan=\"2\" class=\"numbers\">\r\n                        {{ (deduction.total_ded_comp)|round(3) }}\r\n                    </td>\r\n                </tr>\r\n                {% endfor %}\r\n                <tr class=\"spacer\"></tr>\r\n                <tr>\r\n                    {% set total_sql = frappe.db.sql(\"SELECT \r\n                        sum(tsd.amount) AS total \r\n                        FROM `tabSalary Detail` tsd \r\n                        INNER JOIN `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                        WHERE tss.employee = %s\r\n                        AND tsd.parentfield = 'deductions' \r\n                        AND tss.docstatus =1 \r\n                        AND YEAR(tss.posting_date) = %s\" , (doc.employee , date.strftime('%Y'))) %}\r\n                    {% set ss_amount = emp_data.social_security_amount | float %}\r\n                    {% set total_ded =total_sql[0][0] %}\r\n                    <td class=\"data\"><strong>\u0627\u0644\u0645\u062c\u0645\u0648\u0639</strong></td>\r\n                    <td colspan=\"2\" class=\"numbers\"><strong>{{ ((total_ded))|round(3) }}</strong></td>\r\n                    \r\n                </tr>\r\n            </table>\r\n\r\n        </div>\r\n        <div class=\"earnings\">\r\n            <table>\r\n                <tr>\r\n                    <th class=\"salary-head\"><strong>\u0627\u0644\u0631\u0648\u0627\u062a\u0628 \u0648 \u0627\u0644\u0623\u062c\u0648\u0631 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629</strong></th>\r\n                    <th class=\"money-j\"><strong>\u062f\u064a\u0646\u0627\u0631</strong></th>\r\n                    <th class=\"money-f\"><strong>\u0641\u0644\u0633</strong></th>\r\n                </tr>\r\n                <tr class=\"spacer\"></tr>\r\n                <tr>\r\n                     {% set basic = frappe.db.sql(\"SELECT \r\n                                        tsd.salary_component ,\r\n                                        sum(tsd.amount) AS total \r\n                                        FROM `tabSalary Detail` tsd \r\n                                        INNER JOIN `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                                        WHERE tss.employee = %s\r\n                                        AND tsd.parentfield = 'earnings' \r\n                                        AND tsd.salary_component = 'Basic'\r\n                                        AND tss.docstatus =1\r\n                                        AND YEAR(tss.posting_date) = %s\",(doc.employee , date.strftime('%Y') ) ,as_dict = True ) %}\r\n                    <td class=\"data\">\r\n                         {% set basic_name = frappe.get_all(\"Salary Component\" , filters={\"name\" : basic[0]['salary_component'] } , fields=[\"name_ar\"])%}\r\n                        {{ basic_name[0].name_ar }}\r\n                    </td>\r\n                    <td colspan=\"2\" class=\"numbers\">\r\n                        {% set total_base = basic[0]['total'] | float %}\r\n                        {{ (total_base)|round(3) }}\r\n                    </td>\r\n                </tr>\r\n                {% set earnings = frappe.db.sql(\"\"\"SELECT \r\n                                                        tsd.salary_component, \r\n                                                        SUM(tsd.amount) AS total_ern_comp\r\n                                                    FROM \r\n                                                        `tabSalary Detail` tsd\r\n                                                    INNER JOIN \r\n                                                        `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                                                    WHERE \r\n                                                        tss.employee = %s \r\n                                                        AND tsd.parentfield = 'earnings'\r\n                                                    \tAND  tsd.salary_component !='Basic'\r\n                                                        AND tss.docstatus = 1\r\n                                                        AND YEAR(tss.posting_date) = %s\r\n                                                    GROUP BY \r\n                                                        tsd.salary_component \"\"\" ,(doc.employee  , date.strftime('%Y')) , as_dict = True ) %}\r\n                {% for earning in earnings %} \r\n                <tr>\r\n                    <td class=\"data\">\r\n                        {% set comp_name = frappe.get_all(\"Salary Component\" , filters={\"name\" : earning.salary_component } , fields=[\"name_ar\"])%}\r\n                        {{ comp_name[0].name_ar }}\r\n                    </td>\r\n                   \r\n                    <td colspan=\"2\" class=\"numbers\">\r\n                        {{ (earning.total_ern_comp)|round(3) }}\r\n                    </td>\r\n                </tr>\r\n                {% endfor %}\r\n\r\n                <tr class=\"spacer\"></tr>\r\n                <tr>\r\n                    {% set ern_total_sql = frappe.db.sql(\"SELECT \r\n                                                            SUM(tsd.amount) AS total_full\r\n                                                        FROM \r\n                                                            `tabSalary Detail` tsd\r\n                                                        INNER JOIN \r\n                                                            `tabSalary Slip` tss ON tss.name = tsd.parent \r\n                                                        WHERE \r\n                                                            tss.employee = %s\r\n                                                            AND tsd.parentfield = 'earnings'\r\n                                                            AND tss.docstatus = 1\r\n                                                            AND YEAR(tss.posting_date) = %s\" , (doc.employee , date.strftime('%Y')), as_dict= True) %}\r\n                                                            \r\n                    {% set total_ern =ern_total_sql[0]['total_full'] | float %}\r\n                    <td class=\"data\"><strong>\u0627\u0644\u0645\u062c\u0645\u0648\u0639</strong></td>\r\n                    <td colspan=\"2\" class=\"numbers\"><strong>{{ (total_ern)|round(3) }}</strong></td>\r\n                    \r\n                </tr>   \r\n            </table>\r\n        </div>\r\n    </div>\r\n    <p class=\"right-text\">\r\n        \u0627\u0634\u0647\u062f \u0627\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062f\u0631\u062c\u0629 \u0627\u0639\u0644\u0627\u0647 \u0635\u062d\u064a\u062d\u0629 \u0648 \u062d\u0642\u064a\u0642\u064a\u0629 \u0648 \u0643\u0627\u0645\u0644\u0629 \u0648 \u063a\u064a\u0631 \u0645\u0646\u0642\u0648\u0635\u0629 \u0648 \u0623\u0646\u0646\u064a \u0642\u0645\u062a \u0628\u062f\u0641\u0639 \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u062f\u062e\u0644 \u0627\u0644\u0645\u0642\u062a\u0637\u0639\u0629 \u0648 \u0627\u0644\u0645\u0628\u064a\u0646\u0629 \u0623\u0639\u0644\u0627\u0647 \u0627\u0644\u0649 \u062f\u0627\u0626\u0631\u0629 \u0636\u0631\u0628\u064a\u0629 \u0627\u0644\u062f\u062e\u0644 \u0648 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a\r\n    </p>   \r\n     <div class=\"div-company-owner\">\r\n        <div class=\"owner\" >\r\n            <div style=\"border: 1px solid black; height: 45px; width: 40%;\"></div>\r\n            <strong><div style=\"margin-left: 10px;\">\u062e\u062a\u0645 \u0648 \u062a\u0648\u0642\u064a\u0639<br>\u0635\u0627\u062d\u0628 \u0627\u0644\u0639\u0645\u0644</div></strong>\r\n        </div>\r\n        \r\n        <div class=\"company\">\r\n            <p>\r\n                {{doc.company}}<span style=\"margin:   0 10px;\"> </span> <strong>\u0627\u0633\u0645 \u0635\u0627\u062d\u0628 \u0627\u0644\u0639\u0645\u0644</strong>\r\n            </p>\r\n            <br>\r\n            <p>\r\n                 <div style=\"display: flex; justify-content: flex-end;\">\r\n                    {% set tax_id = frappe.db.sql(\"SELECT tax_id FROM tabCompany WHERE name = %s\", (doc.company,), as_dict=True) %}\r\n                    <div style=\"border: 1px solid black; height: 25px; width: 50%; text-align: center;\">\r\n                        {{ tax_id[0]['tax_id']  or \"\" }}\r\n                    </div>\r\n                        <div style=\"margin-left: 10px;\"><strong>\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a</strong></div>\r\n                \r\n                </div>\r\n\r\n            </p>\r\n            <br>\r\n            <p>\r\n             <span style=\"margin: 0 8px;\"> </span> / <span style=\"margin: 0 8px;\"> </span> /<span style=\"margin: 0 8px;\"> </span>   \u0627\u0644\u062a\u0627\u0631\u064a\u062e\r\n            </p>\r\n        </div>\r\n     </div>\r\n</body>\r\n</html>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-03-24 23:39:00.543025",
 "modified_by": "Administrator",
 "module": "Masar Hrms",
 "name": "AR-3",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}